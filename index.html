<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ… Secret Santa</title>

<script>
const people = [
  { name: "Sneha Patel", img: "https://randomuser.me/api/portraits/women/45.jpg" },
  { name: "Rahul Sharma", img: "https://randomuser.me/api/portraits/men/32.jpg" },
  { name: "Aman Verma", img: "https://randomuser.me/api/portraits/men/75.jpg" }
];

const p = people[Math.floor(Math.random() * people.length)];
photo.src = p.img;
name.innerText = p.name;
budget.innerText = "Budget: â‚¹" + (1000 + Math.floor(Math.random()*700));
msg.innerText = "Make it magical ðŸŽ„âœ¨";

const canvas = document.getElementById("scratch");
const ctx = canvas.getContext("2d");

canvas.width = 360;
canvas.height = 500;

/* ðŸŽ¨ SILVER SCRATCH LAYER */
ctx.fillStyle = "#d0d0d0";
ctx.fillRect(0,0,canvas.width,canvas.height);
ctx.fillStyle = "#555";
ctx.font = "bold 22px Segoe UI";
ctx.textAlign = "center";
ctx.fillText("SCRATCH HERE", canvas.width/2, canvas.height/2);

ctx.globalCompositeOperation = "destination-out";

let isDown = false;
let revealed = false;

function scratch(x,y) {
  ctx.beginPath();
  ctx.arc(x,y,30,0,Math.PI*2);
  ctx.fill();
  checkReveal();
}

function checkReveal() {
  if (revealed) return;

  const img = ctx.getImageData(0,0,canvas.width,canvas.height);
  let cleared = 0;

  for (let i = 3; i < img.data.length; i += 4) {
    if (img.data[i] === 0) cleared++;
  }

  const percent = cleared / (canvas.width * canvas.height) * 100;

  if (percent > 35) {
    revealed = true;
    canvas.style.transition = "opacity 1s ease";
    canvas.style.opacity = 0;
    setTimeout(() => canvas.remove(), 1000);
  }
}

/* ðŸ–±ï¸ Mouse */
canvas.addEventListener("mousedown", () => isDown = true);
canvas.addEventListener("mouseup", () => isDown = false);
canvas.addEventListener("mousemove", e => {
  if (isDown) scratch(e.offsetX, e.offsetY);
});

/* ðŸ“± Touch */
canvas.addEventListener("touchstart", () => isDown = true);
canvas.addEventListener("touchend", () => isDown = false);
canvas.addEventListener("touchmove", e => {
  e.preventDefault();
  const r = canvas.getBoundingClientRect();
  scratch(
    e.touches[0].clientX - r.left,
    e.touches[0].clientY - r.top
  );
},{ passive:false });
</script>

</body>
</html>
